/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
const pokemonRepository=function(){let t=[],e=document.querySelector("#modal-container"),n=document.querySelector(".loader");function o(e){"object"==typeof e&&null!==e&&"name"in e&&"detailsUrl"in e?t.push(e):console.log("Invalid input! Please try again.")}function i(){return t}function a(){n.classList.add("loader")}function r(){n.classList.add("loader-hidden"),$(".loader").remove()}function l(t){pokemonRepository.loadDetails(t).then(function(){s(t)})}function s(t){var e;let n=$(".modal-body"),o=$(".modal-title");o.empty(),n.empty();let i=$("<h3>"+t.name+"</h3>"),a=$("<img>");a.addClass(".modal-img"),a.attr("src",t.imageUrl),a.attr("width","50%"),a.attr("height","50%");let r=$('<p class="h6">Height: '+t.height+"</p>"),l,s=$('<p class="h6">Type: '+(e=t,l="",e.types.forEach(function(t){let e=t.type,n=e.name;l=l+n+" "}),l)+"</p>");o.append(i),n.append(a),n.append(r),n.append(s);let u=$("#pokemonModal");u.modal("show")}return{addListItem:function t(e){let n=$(".pokemon-list"),o=$('<button class="pokemon-button btn btn-info float-md-left float-lg-left" data-target="#pokemonModal" data-target="modal">'+e.name+"</button>");n.append(o),o.on("click",function(){l(e)})},add:o,getAll:i,showLoadingMessage:a,hideLoadingMessage:r,loadList:function t(){return a(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=100").then(function(t){return t.json()}).then(function(t){t.results.forEach(function(t){let e={name:t.name,detailsUrl:t.url};o(e)}),r()}).catch(function(t){console.error(t)})},loadDetails:function t(e){let n=e.detailsUrl;return fetch(n).then(function(t){return t.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types}).catch(function(t){console.error(t)})},showDetails:l,hideModal:function t(){e.classList.remove("is-visible")},showModal:s}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(t){pokemonRepository.addListItem(t)})}),function(){let t=$("#pokemonName");function e(t,e){let n=t.parent(),o=n.find(".error-message");if(o&&$(".error-message").remove(),e){let i=$('<div class="break error-message"></div>');i.text(e),n.append(i)}}function n(){let n=t.val();return n?(e(t,null),!0):(e(t,"Name is required."),!1)}function o(n){if("string"==typeof n&&n.length>0)return fetch("https://pokeapi.co/api/v2/pokemon/"+n).then(function(t){return t.json()}).then(function(t){let e=t;e.imageUrl=t.sprites.front_default,pokemonRepository.showModal(e)}).catch(function(n){e(t,"Sorry! Not found.")});console.log("Sorry! Not found.")}$("form").submit(function(e){e.preventDefault(),function e(){let i=n();i&&o(t.val().toLowerCase())}()&&(alert("Success"),o(t))}),t.on("input",n)}();


